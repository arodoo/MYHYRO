jQuery(document).ready(function(){jQuery.noConflict();function e(h){var g=document.getElementById(h);jQuery(g).trigger("click")}$=jQuery.noConflict();if(/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)){$(".selectpicker").selectpicker("mobile")}$('[data-toggle="tooltip"]').tooltip();$("#datepicker").datepicker();var d=$("#list_appel_offre");function a(i,g,h){i.each(function(){$(this).parent().css({"background-color":"white",color:"#636363"});$(this).removeClass(h);$(this).removeAttr("checked")});g.parent().css({"background-color":"green",color:"white"});g.addClass(h);g.attr("checked","checked")}function b(g){return g.split(/,\s*/)}function f(g){return b(g).pop()}var c=$("#postuler");c.click(function(){var s=c.attr("data-id_fiche");var z=c.attr("data-id_presta");$.post("/Demande-appel-offre/popup-creation-appel-offre-ajax.php",{id_fiche:s,user:z},function(C){var B=$.parseJSON(C);if(B.error==""){swal({title:"Proposer vos services",type:"question",html:B.msg,showCloseButton:true,showConfirmButton:false})}else{alert(B.msg)}});var n=$(".repondre_prive");n.click(function(){var C=$(this).attr("data-id_fiche");var B=$(this).attr("data-id_presta");var D=$(this).attr("data-id_message");$.post("/Demande-appel-offre/appel-offre-message-prive.php",{id_fiche:C,user:B,id_message_private:D},function(F){var E=$.parseJSON(F);if(E.error==""){swal({title:"Message priv√©",type:"question",html:E.msg,showCloseButton:true,showConfirmButton:false})}else{alert(E.msg)}})});var i=$("#autocomplete_proposition");if(i.length){i.on("keydown",function(B){if(B.keyCode===$.ui.keyCode.TAB&&$(this).autocomplete("instance").menu.active){B.preventDefault()}}).autocomplete({minLength:0,source:function(C,B){$.ajax({url:"Demande-appel-offre/fiche-appel-offre-liste-prestataire-ajax.php",dataType:"json",data:{q:C.term},success:function(D){B(D)}})},focus:function(){return false},select:function(C,D){var B=b(this.value);B.pop();B.push(D.item.value);B.push("");this.value=B.join(", ");return false}})}var h=$(".depart_projet");h.click(function(){a(h,$(this),"start_selected")});var w=$(".budget");w.click(function(){a(w,$(this),"budget_selected")});var k=$("#file_uploded");k.change(function(){var B=k.val().split("\\");var C=0;while(B[C]){C++}$("#name_file").text(" "+B[C-1])});var l=$("#dropzone_form");if(l.length){l.dropzone({dictDefaultMessage:"Put your custom message here",maxFilesize:2,maxFiles:7,acceptedFiles:"image/*, application/pdf, .txt, .csv, .doc, .ppt, .xls, .odt, .zip, .rar, .ace, .gz, .docx, .xlsx, .pptx, .psd",paramName:"uploaded_file",uploadMultiple:true});$(".dz-message span").text("Faites glisser vos fichiers ici")}$(document).change(function(){if($("#private_msg1").val()&&$("#titre_message_prive1").val()){$("#form_submit1").removeAttr("disabled")}else{$("#form_submit1").attr("disabled","disabled")}});$(document).change(function(){if($("#private_msg3").val()){$("#form_submit3").removeAttr("disabled")}else{$("#form_submit3").attr("disabled","disabled")}});$(document).change(function(){if($("#Mon_offre").val()&&$("#nb_jour").val()&&$("#public_msg").val()&&$("#private_msg").val()){$("#form_submit2").removeAttr("disabled")}else{$("#form_submit2").attr("disabled","disabled")}});$(document).on("click",".seek",function(){var B=$(this).attr("data-id");if($(this).hasClass("a_rechercher")){$(this).removeClass("a_rechercher uk-icon-plus");$(this).addClass("recherche uk-icon-minus");$.post("/Demande-appel-offre/fiche-appel-offre-update-recherche-ajax.php",{id:B,statut:"recherche"})}else{$(this).removeClass("recherche uk-icon-minus");$(this).addClass("a_rechercher uk-icon-plus");$.post("/Demande-appel-offre/fiche-appel-offre-update-recherche-ajax.php",{id:B,statut:"a_rechercher"})}});var t=$("#form_submit_update");if(t.length){$("#champ_type, #lieu_event, #titre_projet, #decription, .depart_projet, .budget").change(function(){if($("#champ_type").val()&&$("#lieu_event").val()&&$("#titre_projet").val()&&$("#decription").val()&&$(".budget").hasClass("budget_selected")&&$(".depart_projet").hasClass("start_selected")){t.removeAttr("disabled")}else{t.attr("disabled","disabled")}console.log($("#champ_type").val())})}var j=$("#form_submit");if(j.length){$(document).on("change",function(){if($("#champ_type").val()&&$("#lieu_event").val()&&$("#titre_projet").val()&&$("#nom").val()&&$("#prenom").val()&&$("#email").val()&&$("#telephone").val()&&$("#decription").val()&&$(".budget").hasClass("budget_selected")&&$(".depart_projet").hasClass("start_selected")&&$("#adress").val()&&$("#post_code").val()&&$("#city").val()){j.removeAttr("disabled")}else{j.attr("disabled","disabled")}})}var o=$("#form_modification_appel_offre");if(o.length){$(document).on("change",function(){if($("#champ_type2").val()&&$("#lieu_event2").val()&&$("#titre_projet2").val()&&$("#decription2").val()&&$(".budget").hasClass("budget_selected")&&$(".depart_projet").hasClass("start_selected")){$("#form_submit_update").removeAttr("disabled")}else{$("#form_submit_update").attr("disabled","disabled")}})}var v=$("#toggle_list_action");v.click(function(){$("#list_action").toggle("slow")});var A=$("#type_choix_1");var r=$(".proposition_depart_projet_date");var p=$(".proposition_depart_projet_radio");if(A.length){if(A.val()==1){r.hide();p.show()}else{if(A.val()==4){r.show();p.hide()}else{r.show();p.hide()}}A.change(function(){if(A.val()==1){r.hide();p.show()}else{if(A.val()==4){r.show();p.hide()}else{r.hide();p.hide()}}})}var x=$("#type_choix_2");var u=$(".proposition_buget_radio");var g=$(".proposition_buget_date");if(x.length){if(x.val()==1){u.show();g.hide()}else{if(x.val()==4){u.hide();g.show()}else{u.hide();g.hide()}}x.change(function(){alert(x.val());if(x.val()==1){u.show();g.hide()}else{if(x.val()==4){u.hide();g.show()}else{u.hide();g.hide()}}})}$(document).on("click","#button_file",function(){var C=$("#file_input");var B=$("#name_file");C.change(function(){var E=C.val();var F=E.lastIndexOf("\\")+1;var D=E.length-F;B.text(E.substr(F,D))})});var q=$(".on_off");if(q.length){q.bootstrapToggle({})}var y=$("#searchTextField");if(y.length){var m=y.val();y.autocomplete({source:function(C,B){$.ajax({url:"Demande-appel-offre/ajax-list-ville.php",dataType:"json",data:{q:C.term},success:function(D){B(D)}})}})}$(document).on("change",".action_user",function(){$(".action_user option:selected").each(function(){if($(this).val()=="Litige"){$("#litige").trigger("click")}else{if($(this).val()=="Modifier"){$url=$(this).data("url");window.location.replace($url)}else{if($(this).val()=="Signaler"){$("#signalement").trigger("click")}}}})});$(document).on("change",".action_presta",function(){$(".action_presta option:selected").each(function(){var C=$(this).data("id");if($(this).val()=="Choisir_ce_presta"){$("#presta"+C).trigger("click")}else{if($(this).val()=="message_prive_fiche"){$("#message"+C).trigger("click")}else{if($(this).val()=="Afficher_coordonees"){var B=$(this).data("id_presta");$("#coordonees_presta_"+B).toggle("slow")}}}});$(".action_presta").each(function(){$(this).val("action")})})});$(function(){$("#accordion").accordion({heightStyle:"content"})})});